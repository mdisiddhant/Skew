<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Floor Plan Generator</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --accent: #e74c3c;
            --light: #ecf0f1;
            --dark: #34495e;
            --success: #2ecc71;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f9f9f9;
            color: var(--dark);
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--dark) 100%);
            color: white;
            padding: 2rem 0;
            text-align: center;
            border-radius: 0 0 20px 20px;
            margin-bottom: 2rem;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }
        
        .tagline {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .card {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
        }
        
        .input-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        @media (max-width: 768px) {
            .input-section {
                grid-template-columns: 1fr;
            }
        }
        
        .form-group {
            margin-bottom: 1.2rem;
        }
        
        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--dark);
        }
        
        input, select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }
        
        input:focus, select:focus {
            border-color: var(--secondary);
            outline: none;
        }
        
        button {
            background: var(--secondary);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s, transform 0.2s;
        }
        
        button:hover {
            background: #2980b9;
            transform: translateY(-2px);
        }
        
        .generate-btn {
            background: var(--accent);
            display: block;
            width: 100%;
            margin-top: 1rem;
            padding: 15px;
            font-size: 1.1rem;
        }
        
        .generate-btn:hover {
            background: #c0392b;
        }
        
        .visualization-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 2rem;
        }
        
        @media (max-width: 968px) {
            .visualization-section {
                grid-template-columns: 1fr;
            }
        }
        
        .canvas-container {
            border: 1px solid #ddd;
            border-radius: 8px;
            overflow: hidden;
            height: 400px;
            background: #f8f9fa;
        }
        
        #plotCanvas {
            width: 100%;
            height: 100%;
            display: block;
        }
        
        .view-toggle {
            display: flex;
            margin-bottom: 1rem;
            background: #eee;
            border-radius: 8px;
            overflow: hidden;
        }
        
        .view-toggle button {
            flex: 1;
            border-radius: 0;
            background: transparent;
            color: var(--dark);
            padding: 10px;
        }
        
        .view-toggle button.active {
            background: var(--secondary);
            color: white;
        }
        
        .results-container {
            padding: 1rem;
        }
        
        .room-list {
            list-style: none;
            margin-top: 1rem;
        }
        
        .room-list li {
            padding: 10px 15px;
            background: #f8f9fa;
            border-left: 4px solid var(--secondary);
            margin-bottom: 8px;
            border-radius: 4px;
            display: flex;
            justify-content: space-between;
        }
        
        .cost-estimate {
            background: var(--light);
            padding: 1.5rem;
            border-radius: 8px;
            margin-top: 1.5rem;
        }
        
        .cost-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--accent);
            margin: 1rem 0;
        }
        
        .action-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 2rem;
        }
        
        .action-buttons button {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .design-options {
            display: flex;
            gap: 15px;
            margin-top: 1rem;
            flex-wrap: wrap;
        }
        
        .design-option {
            flex: 1;
            min-width: 120px;
            text-align: center;
            padding: 15px 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .design-option:hover {
            border-color: var(--secondary);
        }
        
        .design-option.selected {
            border-color: var(--secondary);
            background: var(--secondary);
            color: white;
        }
        
        footer {
            text-align: center;
            margin-top: 3rem;
            padding: 2rem 0;
            color: #7f8c8d;
            border-top: 1px solid #ddd;
        }
        
        .loading {
            display: none;
            text-align: center;
            padding: 2rem;
        }
        
        .loading-spinner {
            border: 5px solid #f3f3f3;
            border-top: 5px solid var(--secondary);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1>AI Floor Plan Generator</h1>
            <p class="tagline">Automatically create optimal floor plans for your plot</p>
        </div>
    </header>

    <div class="container">
        <div class="card">
            <h2>Enter Your Plot Details</h2>
            <div class="input-section">
                <div>
                    <div class="form-group">
                        <label for="plotSize">Plot Size (e.g., 30x40, 1000 sq.ft.)</label>
                        <input type="text" id="plotSize" placeholder="Enter plot dimensions" value="30x40">
                    </div>
                    
                    <div class="form-group">
                        <label for="floors">Number of Floors</label>
                        <select id="floors">
                            <option value="1">1 Floor</option>
                            <option value="2" selected>2 Floors</option>
                            <option value="3">3 Floors</option>
                        </select>
                    </div>
                    
                    <h3>Design Style</h3>
                    <div class="design-options">
                        <div class="design-option selected" data-style="modern">Modern</div>
                        <div class="design-option" data-style="traditional">Traditional</div>
                        <div class="design-option" data-style="simple">Simple</div>
                    </div>
                </div>
                
                <div>
                    <div class="form-group">
                        <label for="preferredRooms">Preferred Rooms</label>
                        <select id="preferredRooms" multiple size="6">
                            <option value="living" selected>Living Room</option>
                            <option value="kitchen" selected>Kitchen</option>
                            <option value="bedroom" selected>Bedrooms</option>
                            <option value="bathroom" selected>Bathrooms</option>
                            <option value="dining" selected>Dining Room</option>
                            <option value="study">Study Room</option>
                            <option value="parking">Parking</option>
                            <option value="garden">Garden</option>
                        </select>
                        <small>Hold Ctrl to select multiple options</small>
                    </div>
                </div>
            </div>
            
            <button id="generateBtn" class="generate-btn">Generate Floor Plan</button>
        </div>
        
        <div class="loading" id="loadingIndicator">
            <div class="loading-spinner"></div>
            <p>Generating your optimal floor plan...</p>
        </div>
        
        <div class="card" id="resultsCard" style="display: none;">
            <h2>Your Generated Floor Plan</h2>
            
            <div class="view-toggle">
                <button id="view2DBtn" class="active">2D Layout</button>
                <button id="view3DBtn">3D Model</button>
            </div>
            
            <div class="visualization-section">
                <div class="canvas-container">
                    <canvas id="plotCanvas"></canvas>
                </div>
                
                <div class="results-container">
                    <h3>Room Distribution</h3>
                    <ul class="room-list" id="roomList">
                        <!-- Will be populated by JavaScript -->
                    </ul>
                    
                    <div class="cost-estimate">
                        <h3>Estimated Construction Cost</h3>
                        <div class="cost-value" id="costValue">‚Çπ 0</div>
                        <p>Based on current market rates at ‚Çπ1,800 per sq.ft.</p>
                    </div>
                </div>
            </div>
            
            <div class="action-buttons">
                <button id="downloadPdfBtn">üìÑ Download PDF</button>
                <button id="downloadPngBtn">üñºÔ∏è Download PNG</button>
                <button id="shareWhatsappBtn">üì± Share via WhatsApp</button>
                <button id="regenerateBtn">üîÑ Regenerate</button>
            </div>
        </div>
    </div>

    <footer>
        <div class="container">
            <p>AI Floor Plan Generator | Using Advanced AI Algorithms for Optimal Space Planning</p>
            <p>¬© 2023 FloorPlan AI. All rights reserved.</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // DOM Elements
            const plotSizeInput = document.getElementById('plotSize');
            const floorsSelect = document.getElementById('floors');
            const generateBtn = document.getElementById('generateBtn');
            const loadingIndicator = document.getElementById('loadingIndicator');
            const resultsCard = document.getElementById('resultsCard');
            const roomList = document.getElementById('roomList');
            const costValue = document.getElementById('costValue');
            const view2DBtn = document.getElementById('view2DBtn');
            const view3DBtn = document.getElementById('view3DBtn');
            const plotCanvas = document.getElementById('plotCanvas');
            const designOptions = document.querySelectorAll('.design-option');
            
            // Design style selection
            designOptions.forEach(option => {
                option.addEventListener('click', function() {
                    designOptions.forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');
                });
            });
            
            // Generate button click handler
            generateBtn.addEventListener('click', function() {
                const plotSize = plotSizeInput.value;
                const floors = parseInt(floorsSelect.value);
                const designStyle = document.querySelector('.design-option.selected').dataset.style;
                
                if (!isValidPlotSize(plotSize)) {
                    alert('Please enter a valid plot size (e.g., 30x40 or 1000 sq.ft.)');
                    return;
                }
                
                // Show loading indicator
                loadingIndicator.style.display = 'block';
                resultsCard.style.display = 'none';
                
                // Simulate AI processing time
                setTimeout(() => {
                    generateFloorPlan(plotSize, floors, designStyle);
                    loadingIndicator.style.display = 'none';
                    resultsCard.style.display = 'block';
                }, 2000);
            });
            
            // View toggle
            view2DBtn.addEventListener('click', function() {
                view2DBtn.classList.add('active');
                view3DBtn.classList.remove('active');
                // In a real app, this would switch to 2D view
            });
            
            view3DBtn.addEventListener('click', function() {
                view3DBtn.classList.add('active');
                view2DBtn.classList.remove('active');
                // In a real app, this would switch to 3D view
                alert('3D view would be shown with Three.js in a complete implementation');
            });
            
            // Action buttons
            document.getElementById('downloadPdfBtn').addEventListener('click', function() {
                alert('PDF download functionality would be implemented in a complete version');
            });
            
            document.getElementById('downloadPngBtn').addEventListener('click', function() {
                alert('PNG download functionality would be implemented in a complete version');
            });
            
            document.getElementById('shareWhatsappBtn').addEventListener('click', function() {
                alert('WhatsApp sharing would be implemented in a complete version');
            });
            
            document.getElementById('regenerateBtn').addEventListener('click', function() {
                generateBtn.click();
            });
            
            // Validate plot size input
            function isValidPlotSize(input) {
                return /^\d+(\s*x\s*\d+|\s*sq\.\s*ft\.?|\s*sq\s*ft\.?)$/i.test(input);
            }
            
            // Generate a floor plan based on input
            function generateFloorPlan(plotSize, floors, designStyle) {
                // Parse plot dimensions
                let width, height;
                if (plotSize.includes('x')) {
                    const parts = plotSize.split('x');
                    width = parseInt(parts[0]);
                    height = parseInt(parts[1]);
                } else {
                    // Assume it's sq.ft. - create a somewhat square plot
                    const area = parseInt(plotSize);
                    width = Math.sqrt(area);
                    height = width * 0.8; // Not perfectly square
                }
                
                // Calculate total area
                const area = width * height;
                
                // Generate room distribution based on area and floors
                const rooms = generateRooms(area, floors, designStyle);
                
                // Calculate construction cost (simplified)
                const costPerSqFt = 1800;
                const totalCost = area * floors * costPerSqFt;
                
                // Update UI
                updateRoomList(rooms);
                costValue.textContent = `‚Çπ ${totalCost.toLocaleString()}`;
                
                // Draw the floor plan
                drawFloorPlan(width, height, rooms);
            }
            
            // Generate room distribution logic
            function generateRooms(area, floors, designStyle) {
                const rooms = [];
                const areaPerFloor = area / floors;
                
                // Base room sizes on area
                if (areaPerFloor >= 500) {
                    // Large house
                    rooms.push({ name: 'Living Room', area: 250, floor: 1 });
                    rooms.push({ name: 'Kitchen', area: 150, floor: 1 });
                    rooms.push({ name: 'Dining Room', area: 120, floor: 1 });
                    rooms.push({ name: 'Master Bedroom', area: 200, floor: 2 });
                    rooms.push({ name: 'Bedroom 2', area: 150, floor: 2 });
                    rooms.push({ name: 'Bedroom 3', area: 120, floor: 2 });
                    rooms.push({ name: 'Bathroom 1', area: 60, floor: 1 });
                    rooms.push({ name: 'Bathroom 2', area: 70, floor: 2 });
                    rooms.push({ name: 'Bathroom 3', area: 50, floor: 2 });
                    if (areaPerFloor > 700) {
                        rooms.push({ name: 'Study Room', area: 100, floor: 2 });
                        rooms.push({ name: 'Balcony', area: 80, floor: 2 });
                    }
                } else {
                    // Smaller house
                    rooms.push({ name: 'Living Room', area: 180, floor: 1 });
                    rooms.push({ name: 'Kitchen', area: 100, floor: 1 });
                    rooms.push({ name: 'Master Bedroom', area: 150, floor: 1 });
                    rooms.push({ name: 'Bedroom 2', area: 120, floor: 1 });
                    rooms.push({ name: 'Bathroom', area: 60, floor: 1 });
                    if (floors > 1) {
                        rooms.push({ name: 'Bedroom 3', area: 130, floor: 2 });
                        rooms.push({ name: 'Bathroom 2', area: 50, floor: 2 });
                    }
                }
                
                // Adjust based on design style
                if (designStyle === 'traditional') {
                    // Traditional homes might have more separate rooms
                    if (areaPerFloor > 600) {
                        rooms.push({ name: 'Pooja Room', area: 50, floor: 1 });
                    }
                } else if (designStyle === 'modern') {
                    // Modern homes might have more open spaces
                    const livingRoom = rooms.find(room => room.name === 'Living Room');
                    if (livingRoom) livingRoom.area += 40;
                }
                
                return rooms;
            }
            
             // Update the room list UI
            function updateRoomList(rooms) {
                roomList.innerHTML = '';
                
                rooms.forEach(room => {
                    const li = document.createElement('li');
                    li.innerHTML = `<span>${room.name} (Floor ${room.floor})</span> <span>${room.area} sq.ft.</span>`;
                    roomList.appendChild(li);
                });
            }
            
            // Draw a simplified floor plan on canvas
            function drawFloorPlan(width, height, rooms) {
                const canvas = document.getElementById('plotCanvas');
                const ctx = canvas.getContext('2d');
                
                // Set canvas size
                canvas.width = canvas.clientWidth;
                canvas.height = canvas.clientHeight;
                
                // Clear canvas
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // Scale to fit the plot in the canvas
                const scale = Math.min(canvas.width / (width * 1.2), canvas.height / (height * 1.2));
                const offsetX = (canvas.width - width * scale) / 2;
                const offsetY = (canvas.height - height * scale) / 2;
                
                // Draw plot boundary
                ctx.strokeStyle = '#34495e';
                ctx.lineWidth = 2;
                ctx.strokeRect(offsetX, offsetY, width * scale, height * scale);
                
                // Draw some random rooms for demonstration
                const roomColors = ['#3498db', '#2ecc71', '#e74c3c', '#f39c12', '#9b59b6', '#1abc9c'];
                
                // Simple grid of rooms for demonstration
                const cols = 3;
                const rows = 3;
                const roomWidth = width / cols;
                const roomHeight = height / rows;
                
                for (let i = 0; i < cols; i++) {
                    for (let j = 0; j < rows; j++) {
                        if (i === 0 && j === 0) continue; // Leave space for corridor
                        
                        const roomX = offsetX + i * roomWidth * scale;
                        const roomY = offsetY + j * roomHeight * scale;
                        const roomW = roomWidth * scale;
                        const roomH = roomHeight * scale;
                        
                        // Draw room
                        ctx.fillStyle = roomColors[(i + j) % roomColors.length] + '80'; // Semi-transparent
                        ctx.fillRect(roomX, roomY, roomW, roomH);
                        ctx.strokeStyle = '#2c3e50';
                        ctx.lineWidth = 1;
                        ctx.strokeRect(roomX, roomY, roomW, roomH);
                        
                        // Room label
                        ctx.fillStyle = '#2c3e50';
                        ctx.font = '12px Arial';
                        ctx.textAlign = 'center';
                        const roomNames = ['Living', 'Kitchen', 'Bedroom', 'Bathroom', 'Dining', 'Study'];
                        ctx.fillText(roomNames[(i + j) % roomNames.length], roomX + roomW/2, roomY + roomH/2);
                    }
                }
                
                // Draw corridor
                ctx.fillStyle = '#ecf0f1';
                ctx.fillRect(offsetX, offsetY, roomWidth * scale, height * scale);
                ctx.strokeStyle = '#2c3e50';
                ctx.lineWidth = 1;
                ctx.strokeRect(offsetX, offsetY, roomWidth * scale, height * scale);
                ctx.fillStyle = '#2c3e50';
                ctx.fillText('Corridor', offsetX + roomWidth * scale/2, offsetY + height * scale/2);
                
                // Draw entrance
                ctx.strokeStyle = '#27ae60';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.arc(offsetX + roomWidth * scale/2, offsetY + height * scale - 10, 10, 0, Math.PI, true);
                ctx.stroke();
                
                // Draw windows
                ctx.strokeStyle = '#3498db';
                ctx.lineWidth = 3;
                
                // Right side windows
                for (let i = 0; i < rows; i++) {
                    ctx.beginPath();
                    ctx.moveTo(offsetX + width * scale, offsetY + i * roomHeight * scale + 30);
                    ctx.lineTo(offsetX + width * scale, offsetY + (i + 1) * roomHeight * scale - 30);
                    ctx.stroke();
                }
                
                // Top side windows
                ctx.beginPath();
                ctx.moveTo(offsetX + 50, offsetY);
                ctx.lineTo(offsetX + width * scale - 50, offsetY);
                ctx.stroke();
            }
            
            // Initial demo render
            window.addEventListener('load', function() {
                // Trigger a initial render for demonstration
                setTimeout(() => {
                    generateBtn.click();
                }, 500);
            });
        });
    </script>
</body>
</html>
